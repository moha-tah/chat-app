<!DOCTYPE html>
<html lang="fr" xmlns:th="http://www.thymeleaf.org">
  <head>
    <meta charset="UTF-8" />
    <title>Liste des Utilisateurs - Application de Chat</title>
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />
    <!-- <link rel="stylesheet" href="/styles.css" /> -->
  </head>
  <body>
    <div class="container-fluid min-vh-100 d-flex flex-column">
      <header class="bg-primary text-white p-3 mb-3 rounded">
        <h1 class="text-center">Gestion des Utilisateurs</h1>
      </header>
      <div class="row flex-grow-1">
        <aside class="col-md-3 bg-light p-3 border-end">
          <h2>Note</h2>
          <p>
            Cette page est réservée aux
            <span class="fw-bold">administrateurs</span>.
          </p>
        </aside>
        <main class="col-md-6 p-4">
          <h2>Liste des utilisateurs</h2>
          <div
            th:if="${successMessage}"
            class="alert alert-success"
            role="alert"
            th:text="${successMessage}"
          >
            <!-- Success message will appear here -->
          </div>
          <div
            th:if="${errorMessage}"
            class="alert alert-danger"
            role="alert"
            th:text="${errorMessage}"
          >
            <!-- Error message will appear here -->
          </div>
          <table class="table table-striped table-hover mt-3">
            <thead class="table-dark">
              <tr>
                <th>ID</th>
                <th>Prénom</th>
                <th>Nom</th>
                <th>Email</th>
                <th>Statut</th>
                <th>Actions</th>
              </tr>
            </thead>
            <tbody>
              <tr th:each="user : ${users}">
                <td th:text="${user.id}"></td>
                <td th:text="${user.firstName}"></td>
                <td th:text="${user.lastName}"></td>
                <td th:text="${user.email}"></td>
                <td>
                  <span th:if="${user.active}" class="badge bg-success"
                    >Activé</span
                  >
                  <span th:unless="${user.active}" class="badge bg-danger"
                    >Désactivé</span
                  >
                </td>
                <td>
                  <a
                    th:href="@{'/admin/users/' + ${user.id}}"
                    class="btn btn-sm btn-info me-1 mb-1"
                    >Voir</a
                  >
                  <a
                    th:href="@{'/admin/users/' + ${user.id} + '/update'}"
                    class="btn btn-sm btn-warning me-1 mb-1"
                    >Modifier</a
                  >
                  <a
                    th:href="@{'/admin/users/' + ${user.id} + '/delete-confirm'}"
                    class="btn btn-sm btn-danger mb-1"
                    >Supprimer</a
                  >
                </td>
              </tr>
            </tbody>
          </table>
        </main>
        <nav class="col-md-3 bg-white p-3 border-start">
          <h2>Navigation</h2>
          <ul class="nav flex-column">
            <li class="nav-item mb-2">
              <a class="nav-link" href="/admin">Accueil</a>
              <a class="nav-link" href="/admin/users">Liste des utilisateurs</a>
              <a class="nav-link" href="/admin/users/create"
                >Créer un utilisateur</a
              >
            </li>
          </ul>
        </nav>
      </div>
      <footer class="bg-dark text-white text-center py-2 mt-3 rounded">
        SR03 - Chat App - Mohamed & Ismat
      </footer>
    </div>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
  </body>
</html>
